<project name="preparePIIDrop" default="PreparePIIDrop" basedir=".">

	<target name="init">
		<property name="editor" value="org.eclipse.wst.sse.ui" />
		<property name="editor_extensions" value="org.eclipse.wst.sse.ui.extensions" />
		<property name="editor_css" value="org.eclipse.wst.sse.ui.css" />
		<property name="editor_dtd" value="org.eclipse.wst.sse.ui.dtd" />
		<property name="editor_html" value="org.eclipse.wst.sse.ui.html" />
		<property name="editor_js" value="org.eclipse.wst.sse.ui.javascript" />
		<property name="editor_jsp" value="org.eclipse.wst.sse.ui.jsp" />
		<property name="editor_xml" value="org.eclipse.wst.sse.ui.xml" />
		<property name="qev" value="com.ibm.etools.qev" />
		<property name="snippets" value="org.eclipse.wst.sse.snippets" />
		<property name="js_common_ui" value="org.eclipse.wst.sse.javascript.common.ui" />
		<property name="model" value="org.eclipse.wst.sse.core" />
		<property name="model_css" value="org.eclipse.wst.sse.core.css" />
		<property name="model_dtd" value="org.eclipse.wst.sse.core.dtd" />
		<property name="model_html" value="org.eclipse.wst.sse.core.html" />
		<property name="model_js" value="org.eclipse.wst.sse.core.javascript" />
		<property name="model_jsp" value="org.eclipse.wst.sse.core.jsp" />
		<property name="model_xml" value="org.eclipse.wst.sse.core.xml" />
		<property name="encoding_resource" value="org.eclipse.wst.common.encoding" />
		<property name="content_properties" value="org.eclipse.wst.sse.ui.contentproperties" />
		<property name="validation_html" value="org.eclipse.wst.validation.core.html" />
		<property name="system_dtds" value="com.ibm.webtooling.system.dtds" />
		<property name="xmleditor" value="com.ibm.xmleditor" />

		<property name="dropsDir" value="E:/builds/piibuilds/drops/en" />
	</target>

	<target name="CleanDrive" depends="init">
		<echo message="Deleting previous drop files." />
		<delete dir="${dropsDir}" />
	</target>

	<target name="CopyFiles" depends="init">
		<echo message="Copying files from workspace to build directory." />
		<mkdir dir="${dropsDir}" />

		<mkdir dir="${dropsDir}/${editor}.nl1" />
		<mkdir dir="${dropsDir}/${editor}.nl1/src" />

		<mkdir dir="${dropsDir}/${editor_extensions}.nl1" />
		<!-- no src/*.properties for ${editor_extensions} -->

		<mkdir dir="${dropsDir}/${editor_css}.nl1" />
		<mkdir dir="${dropsDir}/${editor_css}.nl1/src" />

		<mkdir dir="${dropsDir}/${editor_dtd}.nl1" />
		<!-- no src/*.properties for ${editor_dtd} -->

		<mkdir dir="${dropsDir}/${editor_html}.nl1" />
		<mkdir dir="${dropsDir}/${editor_html}.nl1/src" />

		<mkdir dir="${dropsDir}/${editor_js}.nl1" />
		<mkdir dir="${dropsDir}/${editor_js}.nl1/src" />

		<mkdir dir="${dropsDir}/${editor_jsp}.nl1" />
		<mkdir dir="${dropsDir}/${editor_jsp}.nl1/src" />

		<mkdir dir="${dropsDir}/${editor_xml}.nl1" />
		<mkdir dir="${dropsDir}/${editor_xml}.nl1/src" />

		<mkdir dir="${dropsDir}/${qev}.nl1" />
		<mkdir dir="${dropsDir}/${qev}.nl1/src" />

		<mkdir dir="${dropsDir}/${snippets}.nl1" />
		<mkdir dir="${dropsDir}/${snippets}.nl1/src" />

		<mkdir dir="${dropsDir}/${js_common_ui}.nl1" />
		<mkdir dir="${dropsDir}/${js_common_ui}.nl1/src" />

		<mkdir dir="${dropsDir}/${model}.nl1" />
		<mkdir dir="${dropsDir}/${model}.nl1/src" />

		<mkdir dir="${dropsDir}/${model_css}.nl1" />
		<mkdir dir="${dropsDir}/${model_css}.nl1/src" />

		<mkdir dir="${dropsDir}/${model_dtd}.nl1" />
		<!-- no src/*.properties for ${model_dtd} -->

		<mkdir dir="${dropsDir}/${model_html}.nl1" />
		<mkdir dir="${dropsDir}/${model_html}.nl1/src" />

		<mkdir dir="${dropsDir}/${model_js}.nl1" />
		<mkdir dir="${dropsDir}/${model_js}.nl1/src" />

		<mkdir dir="${dropsDir}/${model_jsp}.nl1" />
		<mkdir dir="${dropsDir}/${model_jsp}.nl1/src" />

		<mkdir dir="${dropsDir}/${model_xml}.nl1" />
		<!-- no src/*.properties for ${model_xml} -->

		<mkdir dir="${dropsDir}/${encoding_resource}.nl1" />
		<mkdir dir="${dropsDir}/${encoding_resource}.nl1/src" />

		<mkdir dir="${dropsDir}/${content_properties}.nl1" />
		<!-- no src/*.properties for ${content_properties} -->

		<mkdir dir="${dropsDir}/${validation_html}.nl1" />
		<mkdir dir="${dropsDir}/${validation_html}.nl1/src" />

		<mkdir dir="${dropsDir}/${system_dtds}.nl1" />
		<!-- no src/*.properties for ${system_dtds} -->

		<mkdir dir="${dropsDir}/${xmleditor}.nl1" />
		<mkdir dir="${dropsDir}/${xmleditor}.nl1/src" />

		<mkdir dir="${dropsDir}/${editor_html}" />
		<mkdir dir="${dropsDir}/${editor_html}/templates" />

		<mkdir dir="${dropsDir}/${editor_jsp}" />
		<mkdir dir="${dropsDir}/${editor_jsp}/templates" />

		<mkdir dir="${dropsDir}/${editor_xml}" />
		<mkdir dir="${dropsDir}/${editor_xml}/templates" />

		<mkdir dir="${dropsDir}/${model_html}" />
		<mkdir dir="${dropsDir}/${model_html}/data" />

		<mkdir dir="${dropsDir}/${js_common_ui}" />
		<mkdir dir="${dropsDir}/${js_common_ui}/data" />

		<mkdir dir="${dropsDir}/${encoding_resource}" />
		<mkdir dir="${dropsDir}/${encoding_resource}/config" />

		<copy toDir="${dropsDir}/${editor}.nl1">
			<fileset dir="../../../${editor}" includes="**/plugin.properties" />
		</copy>
		<copy toDir="${dropsDir}/${editor}.nl1/src">
			<fileset dir="../../../${editor}/src" includes="**/*.properties" />
		</copy>
		<copy toDir="${dropsDir}/${editor_extensions}.nl1">
			<fileset dir="../../../${editor_extensions}" includes="**/plugin.properties" />
		</copy>
		<!-- no src/*.properties for ${editor_extensions} -->
		<copy toDir="${dropsDir}/${editor_css}.nl1">
			<fileset dir="../../../${editor_css}" includes="**/plugin.properties" />
		</copy>
		<copy toDir="${dropsDir}/${editor_css}.nl1/src">
			<fileset dir="../../../${editor_css}/src" includes="**/*.properties" />
		</copy>
		<copy toDir="${dropsDir}/${editor_dtd}.nl1">
			<fileset dir="../../../${editor_dtd}" includes="**/plugin.properties" />
		</copy>
		<!-- no src/*.properties for ${editor_dtd} -->
		<copy toDir="${dropsDir}/${editor_html}.nl1">
			<fileset dir="../../../${editor_html}" includes="**/plugin.properties" />
		</copy>
		<copy toDir="${dropsDir}/${editor_html}.nl1/src">
			<fileset dir="../../../${editor_html}/src" includes="**/*.properties" />
		</copy>
		<copy toDir="${dropsDir}/${editor_js}.nl1">
			<fileset dir="../../../${editor_js}" includes="**/plugin.properties" />
		</copy>
		<copy toDir="${dropsDir}/${editor_js}.nl1/src">
			<fileset dir="../../../${editor_js}/src" includes="**/*.properties" />
		</copy>
		<copy toDir="${dropsDir}/${editor_jsp}.nl1">
			<fileset dir="../../../${editor_jsp}" includes="**/plugin.properties" />
		</copy>
		<copy toDir="${dropsDir}/${editor_jsp}.nl1/src">
			<fileset dir="../../../${editor_jsp}/src" includes="**/*.properties" />
		</copy>
		<copy toDir="${dropsDir}/${editor_xml}.nl1">
			<fileset dir="../../../${editor_xml}" includes="**/plugin.properties" />
		</copy>
		<copy toDir="${dropsDir}/${editor_xml}.nl1/src">
			<fileset dir="../../../${editor_xml}/src" includes="**/*.properties" />
		</copy>
		<copy toDir="${dropsDir}/${qev}.nl1">
			<fileset dir="../../../${qev}" includes="**/plugin.properties" />
		</copy>
		<copy toDir="${dropsDir}/${qev}.nl1/src">
			<fileset dir="../../../${qev}/src" includes="**/*.properties" />
		</copy>
		<copy toDir="${dropsDir}/${snippets}.nl1">
			<fileset dir="../../../${snippets}" includes="**/plugin.properties" />
		</copy>
		<copy toDir="${dropsDir}/${snippets}.nl1/src">
			<fileset dir="../../../${snippets}/src" includes="**/*.properties" />
		</copy>
		<copy toDir="${dropsDir}/${js_common_ui}.nl1">
			<fileset dir="../../../${js_common_ui}" includes="**/plugin.properties" />
		</copy>
		<copy toDir="${dropsDir}/${js_common_ui}.nl1/src">
			<fileset dir="../../../${js_common_ui}/src" includes="**/*.properties" />
		</copy>
		<copy toDir="${dropsDir}/${model}.nl1">
			<fileset dir="../../../${model}" includes="**/plugin.properties" />
		</copy>
		<copy toDir="${dropsDir}/${model}.nl1/src">
			<fileset dir="../../../${model}/src" includes="**/*.properties" />
		</copy>
		<copy toDir="${dropsDir}/${model_css}.nl1">
			<fileset dir="../../../${model_css}" includes="**/plugin.properties" />
		</copy>
		<copy toDir="${dropsDir}/${model_css}.nl1/src">
			<fileset dir="../../../${model_css}/src" includes="**/*.properties" />
		</copy>
		<copy toDir="${dropsDir}/${model_dtd}.nl1">
			<fileset dir="../../../${model_dtd}" includes="**/plugin.properties" />
		</copy>
		<!-- no src/*.properties for ${model_dtd} -->
		<copy toDir="${dropsDir}/${model_html}.nl1">
			<fileset dir="../../../${model_html}" includes="**/plugin.properties" />
		</copy>
		<copy toDir="${dropsDir}/${model_html}.nl1/src">
			<fileset dir="../../../${model_html}/src" includes="**/*.properties" />
		</copy>
		<copy toDir="${dropsDir}/${model_js}.nl1">
			<fileset dir="../../../${model_js}" includes="**/plugin.properties" />
		</copy>
		<copy toDir="${dropsDir}/${model_js}.nl1/src">
			<fileset dir="../../../${model_js}/src" includes="**/*.properties" />
		</copy>
		<copy toDir="${dropsDir}/${model_jsp}.nl1">
			<fileset dir="../../../${model_jsp}" includes="**/plugin.properties" />
		</copy>
		<copy toDir="${dropsDir}/${model_jsp}.nl1/src">
			<fileset dir="../../../${model_jsp}/src" includes="**/*.properties" />
		</copy>
		<copy toDir="${dropsDir}/${model_xml}.nl1">
			<fileset dir="../../../${model_xml}" includes="**/plugin.properties" />
		</copy>
		<!-- no src/*.properties for ${model_xml} -->
		<copy toDir="${dropsDir}/${encoding_resource}.nl1">
			<fileset dir="../../../${encoding_resource}" includes="**/plugin.properties" />
		</copy>
		<copy toDir="${dropsDir}/${encoding_resource}.nl1/src">
			<fileset dir="../../../${encoding_resource}/src" includes="**/*.properties" />
		</copy>
		<copy toDir="${dropsDir}/${content_properties}.nl1">
			<fileset dir="../../../${content_properties}" includes="**/plugin.properties" />
		</copy>
		<!-- no src/*.properties for ${content_properties} -->
		<copy toDir="${dropsDir}/${validation_html}.nl1">
			<fileset dir="../../../${validation_html}" includes="**/plugin.properties" />
		</copy>
		<copy toDir="${dropsDir}/${validation_html}.nl1/src">
			<fileset dir="../../../${validation_html}/src" includes="**/*.properties" />
		</copy>
		<copy toDir="${dropsDir}/${system_dtds}.nl1">
			<fileset dir="../../../${system_dtds}" includes="**/plugin.properties" />
		</copy>
		<!-- no src/*.properties for ${system_dtds} -->
		<copy toDir="${dropsDir}/${xmleditor}.nl1">
			<fileset dir="../../../${xmleditor}" includes="**/plugin.properties" />
		</copy>
		<copy toDir="${dropsDir}/${xmleditor}.nl1/src">
			<fileset dir="../../../${xmleditor}/src" includes="**/*.properties" />
		</copy>
		<copy toDir="${dropsDir}/${editor_html}/templates">
			<fileset dir="../../../${editor_html}/templates" includes="**/htmldefault-templates.properties" />
		</copy>
		<copy toDir="${dropsDir}/${editor_jsp}/templates">
			<fileset dir="../../../${editor_jsp}/templates" includes="**/jspdefault-templates.properties" />
		</copy>
		<copy toDir="${dropsDir}/${editor_xml}/templates">
			<fileset dir="../../../${editor_xml}/templates" includes="**/xmldefault-templates.properties" />
		</copy>
		<copy toDir="${dropsDir}/${model_html}/data">
			<fileset dir="../../../${model_html}/data" includes="**/htmref.properties" />
		</copy>
		<copy toDir="${dropsDir}/${js_common_ui}/data">
			<fileset dir="../../../${js_common_ui}/data" includes="**/jsref.properties" />
		</copy>
		<copy toDir="${dropsDir}/${encoding_resource}/config">
			<fileset dir="../../../${encoding_resource}/config" includes="**/charset.properties" />
		</copy>

		<copy toDir="${dropsDir}" file="README.2TC.RME" />
	</target>

	<!-- Set all the message IDs ... IWAK####X -->
	<target name="SetMessageIDs" depends="init">
		<messageIdGen folderPath="${dropsDir}" componentId="K" />
	</target>

	<!-- Delete the backup files created by msgID -->
	<target name="DeleteBackup" depends="init">
		<echo message="Deleting *.properties.backup files" />
		<delete>
			<fileset dir="${dropsDir}" includes="**/*.properties.backup" />
		</delete>
	</target>

	<target name="CreateZip" depends="init">
		<echo message="Creating zip." />
		<zip basedir="${dropsDir}" zipfile="${dropsDir}/../sedit.zip" />
	</target>

	<target name="CopyBack" depends="init">
		<echo message="Copying files back to workspace." />
		<copy toDir="../../../${editor}">
			<fileset dir="${dropsDir}/${editor}.nl1" includes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${editor}/src">
			<fileset dir="${dropsDir}/${editor}.nl1/src" includes="**/*.properties" excludes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${editor_extensions}">
			<fileset dir="${dropsDir}/${editor_extensions}.nl1" includes="**/plugin.properties" />
		</copy>
		<!-- no src/*.properties for ${editor_extensions} -->
		<copy toDir="../../../${editor_css}">
			<fileset dir="${dropsDir}/${editor_css}.nl1" includes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${editor_css}/src">
			<fileset dir="${dropsDir}/${editor_css}.nl1/src" includes="**/*.properties" excludes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${editor_dtd}">
			<fileset dir="${dropsDir}/${editor_dtd}.nl1" includes="**/plugin.properties" />
		</copy>
		<!-- no src/*.properties for ${editor_dtd} -->
		<copy toDir="../../../${editor_html}">
			<fileset dir="${dropsDir}/${editor_html}.nl1" includes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${editor_html}/src">
			<fileset dir="${dropsDir}/${editor_html}.nl1/src" includes="**/*.properties" excludes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${editor_js}">
			<fileset dir="${dropsDir}/${editor_js}.nl1" includes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${editor_js}/src">
			<fileset dir="${dropsDir}/${editor_js}.nl1/src" includes="**/*.properties" excludes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${editor_jsp}">
			<fileset dir="${dropsDir}/${editor_jsp}.nl1" includes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${editor_jsp}/src">
			<fileset dir="${dropsDir}/${editor_jsp}.nl1/src" includes="**/*.properties" excludes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${editor_xml}">
			<fileset dir="${dropsDir}/${editor_xml}.nl1" includes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${editor_xml}/src">
			<fileset dir="${dropsDir}/${editor_xml}.nl1/src" includes="**/*.properties" excludes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${qev}">
			<fileset dir="${dropsDir}/${qev}.nl1" includes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${qev}/src">
			<fileset dir="${dropsDir}/${qev}.nl1/src" includes="**/*.properties" excludes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${snippets}">
			<fileset dir="${dropsDir}/${snippets}.nl1" includes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${snippets}/src">
			<fileset dir="${dropsDir}/${snippets}.nl1/src" includes="**/*.properties" excludes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${js_common_ui}">
			<fileset dir="${dropsDir}/${js_common_ui}.nl1" includes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${js_common_ui}/src">
			<fileset dir="${dropsDir}/${js_common_ui}.nl1/src" includes="**/*.properties" excludes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${model}">
			<fileset dir="${dropsDir}/${model}.nl1" includes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${model}/src">
			<fileset dir="${dropsDir}/${model}.nl1/src" includes="**/*.properties" excludes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${model_css}">
			<fileset dir="${dropsDir}/${model_css}.nl1" includes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${model_css}/src">
			<fileset dir="${dropsDir}/${model_css}.nl1/src" includes="**/*.properties" excludes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${model_dtd}">
			<fileset dir="${dropsDir}/${model_dtd}.nl1" includes="**/plugin.properties" />
		</copy>
		<!-- no src/*.properties for ${model_dtd} -->
		<copy toDir="../../../${model_html}">
			<fileset dir="${dropsDir}/${model_html}.nl1" includes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${model_html}/src">
			<fileset dir="${dropsDir}/${model_html}.nl1/src" includes="**/*.properties" excludes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${model_js}">
			<fileset dir="${dropsDir}/${model_js}.nl1" includes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${model_js}/src">
			<fileset dir="${dropsDir}/${model_js}.nl1/src" includes="**/*.properties" excludes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${model_jsp}">
			<fileset dir="${dropsDir}/${model_jsp}.nl1" includes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${model_jsp}/src">
			<fileset dir="${dropsDir}/${model_jsp}.nl1/src" includes="**/*.properties" excludes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${model_xml}">
			<fileset dir="${dropsDir}/${model_xml}.nl1" includes="**/plugin.properties" />
		</copy>
		<!-- no src/*.properties for ${model_xml} -->
		<copy toDir="../../../${encoding_resource}">
			<fileset dir="${dropsDir}/${encoding_resource}.nl1" includes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${encoding_resource}/src">
			<fileset dir="${dropsDir}/${encoding_resource}.nl1/src" includes="**/*.properties" excludes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${content_properties}">
			<fileset dir="${dropsDir}/${content_properties}.nl1" includes="**/plugin.properties" />
		</copy>
		<!-- no src/*.properties for ${content_properties} -->
		<copy toDir="../../../${validation_html}">
			<fileset dir="${dropsDir}/${validation_html}.nl1" includes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${validation_html}/src">
			<fileset dir="${dropsDir}/${validation_html}.nl1/src" includes="**/*.properties" excludes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${system_dtds}">
			<fileset dir="${dropsDir}/${system_dtds}.nl1" includes="**/plugin.properties" />
		</copy>
		<!-- no src/*.properties for ${system_dtds} -->
		<copy toDir="../../../${xmleditor}">
			<fileset dir="${dropsDir}/${xmleditor}.nl1" includes="**/plugin.properties" />
		</copy>
		<copy toDir="../../../${xmleditor}/src">
			<fileset dir="${dropsDir}/${xmleditor}.nl1/src" includes="**/*.properties" excludes="**/plugin.properties" />
		</copy>
	</target>

	<target name="PreparePIIDrop">
		<antcall target="CleanDrive" />
		<antcall target="CopyFiles" />
		<antcall target="SetMessageIDs" />
		<antcall target="DeleteBackup" />
		<antcall target="CreateZip" />
	</target>

</project>