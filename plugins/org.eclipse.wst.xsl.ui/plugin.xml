<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

	<extension point="org.eclipse.ui.perspectives">
		<perspective id="org.eclipse.wst.xsl.ui.perspective"
			class="org.eclipse.wst.xsl.ui.internal.perspective.XMLPerspectiveFactory"
			icon="icons/full/xml_perspective.gif" 
			name="%perspectiveName">
		</perspective>
	</extension>
	
	<extension point="org.eclipse.ui.editors">
		<editor name="XSL Editor" 
			icon="icons/full/xslt_file.gif"
			contributorClass="org.eclipse.wst.xml.ui.internal.tabletree.XMLMultiPageEditorActionBarContributor"
			class="org.eclipse.wst.xml.ui.internal.tabletree.XMLMultiPageEditorPart"
			default="true"
			extensions="xsl,xslt"
			id="org.eclipse.wst.xsl.ui.XSLEditor">
			<contentTypeBinding contentTypeId="org.eclipse.wst.xml.core.xslsource" />
		</editor>
	</extension>
	
    <!-- Editor actionsets -->
	<extension point="org.eclipse.ui.actionSetPartAssociations">
		<actionSetPartAssociation
			targetID="org.eclipse.ui.edit.text.actionSet.annotationNavigation">
			<part id="org.eclipse.wst.xsl.ui.XSLEditor" />
		</actionSetPartAssociation>
		<actionSetPartAssociation targetID="org.eclipse.ui.NavigateActionSet">
			<part id="org.eclipse.wst.xsl.ui.XSLEditor" />
		</actionSetPartAssociation>
	</extension>

	<extension point="org.eclipse.wst.sse.ui.editorConfiguration">
		<sourceViewerConfiguration
			class="org.eclipse.wst.xsl.ui.internal.StructuredTextViewerConfigurationXSL"
			target="org.eclipse.wst.xml.core.xslsource">
		</sourceViewerConfiguration>
	    <doubleClickStrategy
           class="org.eclipse.wst.xsl.ui.internal.doubleclick.XSLDoubleClickStrategy"
           target="org.eclipse.wst.xsl.XSL_XPATH">
	    </doubleClickStrategy>
		<provisionalDefinition
			type="activecontexts"
			value="org.eclipse.core.runtime.xml, org.eclipse.wst.xml.navigation, org.eclipse.wst.xml.cleanup, org.eclipse.wst.xml.comments, org.eclipse.wst.xml.selection, org.eclipse.wst.xml.dependencies, org.eclipse.wst.xml.grammar, org.eclipse.wst.xml.expand, org.eclipse.wst.xml.occurrences"
        	target="org.eclipse.core.runtime.xml" />
        <provisionalDefinition
            type="preferencepages"
            value="org.eclipse.wst.xsl.ui.preferences.BasePreferencePage, org.eclipse.wst.xsl.ui.template.preferencePage, org.eclipse.wst.xsl.ui.preferences.Validation, org.eclipse.wst.xml.xpath.ui.XPathPreferencePage, org.eclipse.wst.xsl.ui.XPath"
            target="org.eclipse.wst.xml.core.xslsource"/>
	</extension>
	
	<extension point="org.eclipse.ui.newWizards">
		<wizard category="org.eclipse.wst.XMLCategory"
			class="org.eclipse.wst.xsl.ui.internal.wizards.NewXSLFileWizard"
			finalPerspective="org.eclipse.wst.xsl.ui.perspective" 
			icon="icons/full/xslt_file.gif"
			id="org.eclipse.wst.xsl.ui.internal.wizards.NewStylesheetWizard"
			name="XSL" 
			preferredPerspectives="org.eclipse.wst.xsl.ui.perspective">
			<description>Create a new XSL Stylesheet</description>
			<selection class="org.eclipse.core.resources.IResource">
			</selection>
		</wizard>
	</extension>
	
	<!-- XSL templates -->
	<extension point="org.eclipse.ui.editors.templates">
		<contextType
			class="org.eclipse.wst.xsl.ui.internal.templates.TemplateContextTypeXSL"
			id="xsl_new" name="New XSL">
		</contextType>
		<include file="templates/file_templates.xml" />
	</extension>

	
	<extension point="org.eclipse.ui.preferencePages">
		<page category="org.eclipse.wst.xml.ui.preferences.xml"
			class="org.eclipse.wst.xsl.ui.internal.preferences.MainPreferencePage"
			id="org.eclipse.wst.xsl.ui.preferences.BasePreferencePage" 
			name="%page.name.0" />
		<page category="org.eclipse.wst.xsl.ui.preferences.BasePreferencePage"
			class="org.eclipse.wst.xsl.ui.internal.preferences.XSLTemplatePreferencePage"
			id="org.eclipse.wst.xsl.ui.template.preferencePage" 
			name="Templates">
		</page>

		<page category="org.eclipse.wst.xsl.ui.preferences.BasePreferencePage"
			class="org.eclipse.wst.xsl.ui.internal.preferences.ValidationPreferencePage"
			id="org.eclipse.wst.xsl.ui.preferences.Validation" 
			name="Validation">
		</page>
	</extension>
	
	<extension point="org.eclipse.wst.sse.ui.sourcevalidation">
		<validator scope="total"
			class="org.eclipse.wst.xsl.ui.internal.validation.DelegatingSourceValidatorForXSL"
			id="org.eclipse.wst.xsl.ui.internal.validation.DelegatingSourceValidatorForXSL">
			<contentTypeIdentifier id="org.eclipse.wst.xml.core.xslsource">
				<partitionType id="org.eclipse.wst.sse.ST_DEFAULT"/>
				<partitionType id="org.eclipse.wst.xml.XML_DEFAULT"/>
				<partitionType id="org.eclipse.wst.xsl.XSL_XPATH"/>
			</contentTypeIdentifier>
		</validator>
	</extension>

	<extension point="org.eclipse.wst.sse.ui.sourcevalidation">
		<validator scope="partial"
			class="org.eclipse.wst.xsl.ui.internal.validation.XSLMarkupValidator"
			id="org.eclipse.wst.xsl.ui.internal.validator.markupvalidator">
			<contentTypeIdentifier id="org.eclipse.wst.xml.core.xslsource">
				<partitionType id="org.eclipse.wst.sse.ST_DEFAULT" />
				<partitionType id="org.eclipse.wst.xml.XML_DEFAULT" />
				<partitionType id="org.eclipse.wst.xsl.XSL_XPATH" />
			</contentTypeIdentifier>
		</validator>
	</extension>
	
	<extension point="org.eclipse.ui.actionSets">
		<actionSet id="org.eclipse.wst.xsl.ui.xslActionSet" label="XSL Actions">
			<action id="org.eclipse.wst.xsl.ui.newDTDFileAction"
				class="org.eclipse.wst.xsl.ui.internal.actions.NewDTDFileWizardDelegate"
				icon="icons/full/newdtd_wiz.gif" 
				label="New DTD File" 
				style="push" 
				toolbarPath="org.eclipse.wst.xsl.ui.xslActionSet" />
			<action id="org.eclipse.wst.xsl.ui.newXSDFileAction"
				class="org.eclipse.wst.xsl.ui.internal.actions.NewXSDFileWizardDelegate"
				icon="icons/full/XSDFile.gif" 
				label="New XSD File" 
				style="push" 
				toolbarPath="org.eclipse.wst.xsl.ui.xslActionSet" />
<!--			<action id="org.eclipse.wst.xsl.ui.newWSDLFileAction"
				class="org.eclipse.wst.xsl.ui.internal.actions.NewWSDLFileWizardDelegate"
				icon="icons/full/new_xml.gif" 
				label="New WSDL File" 
				style="push" 
				toolbarPath="org.eclipse.wst.xsl.ui.xslActionSet" /> -->
			<action id="org.eclipse.wst.xsl.ui.newXSLFileAction"
				class="org.eclipse.wst.xsl.ui.internal.actions.NewXSLFileWizardDelegate"
				icon="icons/full/xslt_file.gif" 
				label="New XSL File" 
				style="push" 
				toolbarPath="org.eclipse.wst.xsl.ui.xslActionSet" />
			<action id="org.eclipse.wst.xsl.ui.newXMLFileAction"
				class="org.eclipse.wst.xsl.ui.internal.actions.NewXMLFileWizardDelegate"
				icon="icons/full/new_xml.gif" 
				label="New XML File" 
				style="push" 
				toolbarPath="org.eclipse.wst.xsl.ui.xslActionSet" />
		</actionSet>
	</extension>
	
 <extension
       point="org.eclipse.ui.perspectiveExtensions">
    <perspectiveExtension
          targetID="org.eclipse.wst.xsl.ui.perspective">
       <newWizardShortcut
             id="org.eclipse.wst.xml.ui.internal.wizards.NewXMLWizard">
       </newWizardShortcut>
       <newWizardShortcut
             id="org.eclipse.wst.xsl.ui.internal.wizards.NewStylesheetWizard">
       </newWizardShortcut>
       <newWizardShortcut
             id="org.eclipse.wst.dtd.ui.internal.wizard.NewDTDWizard">
       </newWizardShortcut>
       <newWizardShortcut
             id="org.eclipse.wst.wsdl.ui">
       </newWizardShortcut>
       <newWizardShortcut
             id="org.eclipse.wst.xsd.ui.internal.wizards.NewXSDWizard">
       </newWizardShortcut>
    </perspectiveExtension>
   </extension>
	 <extension
	       point="org.eclipse.ui.navigator.navigatorContent">
	       <commonWizard
	             type="new"
	             wizardId="org.eclipse.wst.dtd.ui.internal.wizard.NewDTDWizard">
	          <enablement></enablement>
	       </commonWizard>
	       <commonWizard
	             type="new"
	             wizardId="org.eclipse.wst.xml.ui.internal.wizards.NewXMLWizard">
	          <enablement>
	          
	          </enablement>
	       </commonWizard>
	       <commonWizard
	             type="new"
	             wizardId="org.eclipse.wst.xsl.ui.internal.wizards.NewStylesheetWizard">
	          <enablement></enablement>
	       </commonWizard>
	       <commonWizard
	             type="new"
	             wizardId="org.eclipse.wst.xsd.ui.internal.wizards.NewXSDWizard">
	          <enablement>
	          </enablement>
	       </commonWizard>
	       <commonWizard
	             type="new"
	             wizardId="org.eclipse.wst.wsdl.ui">
	          <enablement></enablement>
	       </commonWizard>
	 </extension>
  <extension
        point="org.eclipse.ui.handlers">
     <handler
           class="org.eclipse.wst.xsl.ui.internal.handlers.OpenDeclarationHandler"
           commandId="org.eclipse.wst.sse.ui.open.file.from.source">
     </handler>
  </extension>
  <extension
        point="org.eclipse.ui.menus">
     <menuContribution
           locationURI="popup:org.eclipse.wst.sse.ui.StructuredTextEditor.EditorContext?before=additions">
        <command
              commandId="org.eclipse.wst.sse.ui.open.file.from.source"
              id="openSelection"
              label="Open Selection"
              style="push"
              tooltip="Open Selection">
           <visibleWhen
                 checkEnabled="false">
           </visibleWhen>
        </command>
     </menuContribution>
  </extension>
</plugin>
