<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

	<extension point="org.eclipse.ui.perspectives">
		<perspective id="org.eclipse.wst.xsl.ui.perspective"
			class="org.eclipse.wst.xsl.ui.internal.perspective.XMLPerspectiveFactory"
			icon="icons/full/xml_perspective.gif" 
			name="%perspectiveName">
		</perspective>
	</extension>
	
	<extension point="org.eclipse.ui.editors">
		<editor name="%editorName" 
			icon="icons/full/xslt_file.gif"
			contributorClass="org.eclipse.wst.xml.ui.internal.tabletree.SourcePageActionContributor"
			class="org.eclipse.wst.xsl.ui.internal.editor.XSLEditor"
			default="true"
			extensions="xsl,xslt"
			id="org.eclipse.wst.xsl.ui.XSLEditor">
			<contentTypeBinding contentTypeId="org.eclipse.wst.xml.core.xslsource" />
		</editor>
	</extension>
	
    <!-- Editor actionsets -->
	<extension point="org.eclipse.ui.actionSetPartAssociations">
		<actionSetPartAssociation
			targetID="org.eclipse.ui.edit.text.actionSet.annotationNavigation">
			<part id="org.eclipse.wst.xsl.ui.XSLEditor" />
		</actionSetPartAssociation>
		<actionSetPartAssociation targetID="org.eclipse.ui.NavigateActionSet">
			<part id="org.eclipse.wst.xsl.ui.XSLEditor" />
		</actionSetPartAssociation>
	</extension>

	<extension point="org.eclipse.wst.sse.ui.editorConfiguration">
		<sourceViewerConfiguration
			class="org.eclipse.wst.xsl.ui.internal.StructuredTextViewerConfigurationXSL"
			target="org.eclipse.wst.xml.core.xslsource">
		</sourceViewerConfiguration>
	    <doubleClickStrategy
           class="org.eclipse.wst.xsl.ui.internal.doubleclick.XSLDoubleClickStrategy"
           target="org.eclipse.wst.xsl.XSL_XPATH">
	    </doubleClickStrategy>
		<provisionalDefinition
			type="activecontexts"
			value="org.eclipse.core.runtime.xml, org.eclipse.wst.xml.navigation, org.eclipse.wst.xml.cleanup, org.eclipse.wst.xml.comments, org.eclipse.wst.xml.selection, org.eclipse.wst.xml.dependencies, org.eclipse.wst.xml.grammar, org.eclipse.wst.xml.expand, org.eclipse.wst.xml.occurrences"
        	target="org.eclipse.core.runtime.xml" />
        <provisionalDefinition
            type="preferencepages"
            value="org.eclipse.wst.xsl.ui.preferences.BasePreferencePage, org.eclipse.wst.xsl.ui.template.preferencePage, org.eclipse.wst.xsl.ui.preferences.Validation, org.eclipse.wst.xml.xpath.ui.XPathPreferencePage, org.eclipse.wst.xsl.ui.XPath"
            target="org.eclipse.wst.xml.core.xslsource"/>
	</extension>
	
	<extension point="org.eclipse.ui.newWizards">
		<wizard category="org.eclipse.wst.XMLCategory"
			class="org.eclipse.wst.xsl.ui.internal.wizards.NewXSLFileWizard"
			finalPerspective="org.eclipse.wst.xsl.ui.perspective" 
			icon="icons/full/xslt_file.gif"
			id="org.eclipse.wst.xsl.ui.internal.wizards.NewStylesheetWizard"
			name="%wizardNameXSL" 
			preferredPerspectives="org.eclipse.wst.xsl.ui.perspective">
			<description>%wizardDescriptionXSL</description>
			<selection class="org.eclipse.core.resources.IResource">
			</selection>
		</wizard>
	</extension>
	
	<!-- XSL templates -->
	<extension point="org.eclipse.ui.editors.templates">
		<contextType
			class="org.eclipse.wst.xsl.ui.internal.templates.TemplateContextTypeXSL"
			id="xsl_new" name="%contextTypeNewXSL">
		</contextType>
		<include file="templates/file_templates.xml" />
	</extension>

	
	<extension point="org.eclipse.ui.preferencePages">
		<page category="org.eclipse.wst.xml.ui.preferences.xml"
			class="org.eclipse.wst.xsl.ui.internal.preferences.MainPreferencePage"
			id="org.eclipse.wst.xsl.ui.preferences.BasePreferencePage" 
			name="%page.name.0" />
		<page category="org.eclipse.wst.xsl.ui.preferences.BasePreferencePage"
			class="org.eclipse.wst.xsl.ui.internal.preferences.XSLTemplatePreferencePage"
			id="org.eclipse.wst.xsl.ui.template.preferencePage" 
			name="%pageNameTemplates">
		</page>

		<page category="org.eclipse.wst.xsl.ui.preferences.BasePreferencePage"
			class="org.eclipse.wst.xsl.ui.internal.preferences.ValidationPreferencePage"
			id="org.eclipse.wst.xsl.ui.preferences.Validation" 
			name="%pageNameValidation">
		</page>
	</extension>
	
	<extension point="org.eclipse.wst.sse.ui.sourcevalidation">
		<validator scope="total"
			class="org.eclipse.wst.xsl.ui.internal.validation.DelegatingSourceValidatorForXSL"
			id="org.eclipse.wst.xsl.ui.internal.validation.DelegatingSourceValidatorForXSL">
			<contentTypeIdentifier id="org.eclipse.wst.xml.core.xslsource">
				<partitionType id="org.eclipse.wst.sse.ST_DEFAULT"/>
				<partitionType id="org.eclipse.wst.xml.XML_DEFAULT"/>
				<partitionType id="org.eclipse.wst.xsl.XSL_XPATH"/>
			</contentTypeIdentifier>
		</validator>
	</extension>

	<extension point="org.eclipse.wst.sse.ui.sourcevalidation">
		<validator scope="partial"
			class="org.eclipse.wst.xsl.ui.internal.validation.XSLMarkupValidator"
			id="org.eclipse.wst.xsl.ui.internal.validator.markupvalidator">
			<contentTypeIdentifier id="org.eclipse.wst.xml.core.xslsource">
				<partitionType id="org.eclipse.wst.sse.ST_DEFAULT" />
				<partitionType id="org.eclipse.wst.xml.XML_DEFAULT" />
				<partitionType id="org.eclipse.wst.xsl.XSL_XPATH" />
			</contentTypeIdentifier>
		</validator>
	</extension>
	
 <extension
       point="org.eclipse.ui.perspectiveExtensions">
    <perspectiveExtension
          targetID="org.eclipse.wst.xsl.ui.perspective">
       <newWizardShortcut
             id="org.eclipse.wst.xml.ui.internal.wizards.NewXMLWizard">
       </newWizardShortcut>
       <newWizardShortcut
             id="org.eclipse.wst.xsl.ui.internal.wizards.NewStylesheetWizard">
       </newWizardShortcut>
       <newWizardShortcut
             id="org.eclipse.wst.dtd.ui.internal.wizard.NewDTDWizard">
       </newWizardShortcut>
       <newWizardShortcut
             id="org.eclipse.wst.wsdl.ui">
       </newWizardShortcut>
       <newWizardShortcut
             id="org.eclipse.wst.xsd.ui.internal.wizards.NewXSDWizard">
       </newWizardShortcut>
    </perspectiveExtension>
   </extension>
	 <extension
	       point="org.eclipse.ui.navigator.navigatorContent">
	       <commonWizard
	             type="new"
	             wizardId="org.eclipse.wst.dtd.ui.internal.wizard.NewDTDWizard">
	          <enablement></enablement>
	       </commonWizard>
	       <commonWizard
	             type="new"
	             wizardId="org.eclipse.wst.xml.ui.internal.wizards.NewXMLWizard">
	          <enablement>
	          
	          </enablement>
	       </commonWizard>
	       <commonWizard
	             type="new"
	             wizardId="org.eclipse.wst.xsl.ui.internal.wizards.NewStylesheetWizard">
	          <enablement></enablement>
	       </commonWizard>
	       <commonWizard
	             type="new"
	             wizardId="org.eclipse.wst.xsd.ui.internal.wizards.NewXSDWizard">
	          <enablement>
	          </enablement>
	       </commonWizard>
	       <commonWizard
	             type="new"
	             wizardId="org.eclipse.wst.wsdl.ui">
	          <enablement></enablement>
	       </commonWizard>
	 </extension>
  <extension
        point="org.eclipse.ui.handlers">
     <handler
           class="org.eclipse.wst.xsl.ui.internal.handlers.OpenDeclarationHandler"
           commandId="org.eclipse.wst.sse.ui.open.file.from.source">
     </handler>
  </extension>
  <extension
        point="org.eclipse.ui.menus">
     <menuContribution
           locationURI="popup:org.eclipse.wst.sse.ui.StructuredTextEditor.EditorContext?before=additions">
        <command
              commandId="org.eclipse.wst.sse.ui.open.file.from.source"
              id="openSelection"
              label="%commandOpenSelection"
              style="push"
              tooltip="%commandTooltipOpenSelection">
           <visibleWhen
                 checkEnabled="false">
           </visibleWhen>
        </command>
     </menuContribution>
     <menuContribution
              locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
        <toolbar
              id="org.eclipse.wst.xsl.ui.design.NewFileToolBar">
      <separator
           name="org.eclipse.wst.xsl.toolbar.separator.1"
           visible="true">
       </separator>
        <command
              commandId="org.eclipse.ui.newWizard"
              icon="icons/full/new_xml.gif"
              id="org.eclipse.wst.xsl.ui.newXMLFile"
              style="push"
              tooltip="%commandTooltipNewXMLFile">
             <parameter
                   name="newWizardId"
                   value="org.eclipse.wst.xml.ui.internal.wizards.NewXMLWizard">
             </parameter>
          <visibleWhen checkEnabled="false">
			<with variable="activeWorkbenchWindow.activePerspective">
			       <equals value="org.eclipse.wst.xsl.ui.perspective"/>
			    </with>
           </visibleWhen>         
        </command>
        <command
              commandId="org.eclipse.ui.newWizard"
              icon="icons/full/newdtd_wiz.gif"
              id="org.eclipse.wst.xsl.ui.newDTDFile"
              style="push"
              tooltip="%commandTooltipNewXMLFile2">
             <parameter
                   name="newWizardId"
                   value="org.eclipse.wst.dtd.ui.internal.wizard.NewDTDWizard">
             </parameter>
          <visibleWhen checkEnabled="false">
			<with variable="activeWorkbenchWindow.activePerspective">
			       <equals value="org.eclipse.wst.xsl.ui.perspective"/>
			    </with>
           </visibleWhen>         
        </command>
        <command
              commandId="org.eclipse.ui.newWizard"
              icon="icons/full/XSDFile.gif"
              id="org.eclipse.wst.xsl.ui.newXSDFile"
              style="push"
              tooltip="%commandTooltipNewXSDFile">
             <parameter
                   name="newWizardId"
                   value="org.eclipse.wst.xsd.ui.internal.wizards.NewXSDWizard">
             </parameter>
          <visibleWhen checkEnabled="false">
			<with variable="activeWorkbenchWindow.activePerspective">
			       <equals value="org.eclipse.wst.xsl.ui.perspective"/>
			    </with>
           </visibleWhen>         
        </command>        
                
        <command
              commandId="org.eclipse.ui.newWizard"
              icon="icons/full/xslt_file.gif"
              id="org.eclipse.wst.xsl.ui.newXSLFile"
              style="push"
              tooltip="%commandTooltipNewXSLFile">
             <parameter
                   name="newWizardId"
                   value="org.eclipse.wst.xsl.ui.internal.wizards.NewStylesheetWizard">
             </parameter>
          <visibleWhen checkEnabled="false">
			<with variable="activeWorkbenchWindow.activePerspective">
			       <equals value="org.eclipse.wst.xsl.ui.perspective"/>
			    </with>
           </visibleWhen>         
        </command>
      <separator
           name="additions"
           visible="true">
       </separator>
      </toolbar> 
     </menuContribution>
  </extension>
  <extension
        point="org.eclipse.ui.views">
     <view
           class="org.eclipse.wst.xsl.ui.internal.StylesheetView"
           id="org.eclipse.wst.xsl.ui.view.outline"
           name="%viewNameStylesheet"
           category="org.eclipse.wst.xml"
           restorable="true">
     </view>
  </extension>
  <extension point="org.eclipse.core.runtime.adapters">		
		<factory 
            class="org.eclipse.wst.xsl.ui.internal.XSLModelAdapterFactory" 
            adaptableType="org.eclipse.wst.xsl.core.model.XSLModelObject">
            <adapter type="org.eclipse.ui.model.IWorkbenchAdapter"/>
		</factory>
   </extension>     	
   
	<extension point="org.eclipse.ui.editors.annotationTypes">
		<type
			name="org.eclipse.wst.xsl.ui.override">
		</type>
	</extension>
   <extension
         point="org.eclipse.ui.editors.markerAnnotationSpecification">
	  <specification
            annotationType="org.eclipse.wst.xsl.ui.override"
            label="Override"
            icon="$nl$/icons/full/over_co.gif"
			annotationImageProvider ="org.eclipse.wst.xsl.ui.internal.editor.OverrideIndicatorImageProvider"
            textPreferenceKey="overrideIndicator"
            textPreferenceValue="false"
            highlightPreferenceKey="overrideIndicatorHighlighting"
            highlightPreferenceValue="false"
            contributesToHeader="false"
            overviewRulerPreferenceKey="overrideIndicatorInOverviewRuler"
            overviewRulerPreferenceValue="false"
            verticalRulerPreferenceKey="overrideIndicatorInVerticalRuler"
            verticalRulerPreferenceValue="true"
            colorPreferenceKey="overrideIndicatorColor"
            colorPreferenceValue="180,207,205"
            presentationLayer="3"
            showInNextPrevDropdownToolbarActionKey="showoverrideIndicatorInNextPrevDropdownToolbarAction"
            showInNextPrevDropdownToolbarAction="false"
            isGoToNextNavigationTargetKey="isOverrideIndicatorGoToNextNavigationTarget"
	        isGoToNextNavigationTarget="false"
            isGoToPreviousNavigationTargetKey="isOverrideIndicatorGoToPreviousNavigationTarget"
	        isGoToPreviousNavigationTarget="false"
            textStylePreferenceKey="overrideIndicatorTextStyle"
            textStylePreferenceValue="SQUIGGLES">
	  </specification>
	</extension>
</plugin>
